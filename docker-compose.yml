version: "3.8"

services:
  factorion-bot:
    image: factorion-bot:${VERSION}
    container_name: factorion-bot
    environment:
      - LOG_FILE=/var/log/docker/factorion-bot/$(hostname)/logfile.log
    volumes:
      - ${SSH_PATH}:/usr/factorion
      - ${LOG_PATH}:${LOG_PATH}
    networks:
      - service-network
    restart: unless-stopped
    command: sh -c "./run.sh 2>&1 | tee ${LOG_FILE}"

networks:
  service-network:
    external: true